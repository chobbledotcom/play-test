<%# 
  Shared partial for displaying safety standards with detailed breakdown
  
  Parameters:
  - title: The section title (e.g., "Wall Height Requirements:")
  - calculator_result: The result object with :text and :breakdown from calculator
  - passed: Boolean indicating if the requirement is met (kept for backward compatibility)
  - show_compliance: (optional) Show compliance status text (kept for backward compatibility)
%>

<h4><%= title %></h4>

<% if calculator_result[:text].present? %>
  <p><%= calculator_result[:text] %></p>
<% end %>

<% if local_assigns[:show_compliance] && !local_assigns[:passed] %>
  <% if title.include?("Runout") %>
    <p>Non-Compliant (Requires <%= calculator_result[:text].match(/\d+\.\d+m/)[0] %> minimum)</p>
  <% end %>
<% end %>

<h5><%= t('safety_standards.calculators.breakdown_title') %></h5>
<ul>
  <% calculator_result[:breakdown].each do |step| %>
    <li><strong><%= step[0] %>:</strong> <%= step[1] %></li>
  <% end %>
</ul>