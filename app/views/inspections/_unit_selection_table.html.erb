<div class="table-list units-list">
  <!-- Header row -->
  <div class="table-list-header">
    <%= render 'shared/table_column', field: :photo, model: :units, header: true %>
    <%= render 'shared/table_column', field: :name, model: :units, header: true %>
    <%= render 'shared/table_column', field: :manufacturer, model: :units, header: true %>
    <%= render 'shared/table_column', field: :serial, model: :units, header: true %>
    <%= render 'shared/table_column', field: :action, i18n_key: 'units.actions.select', header: true %>
  </div>

  <!-- Data rows -->
  <ul class="table-list-items">
    <% units.each do |item| %>
      <li>
        <div class="table-list-content">
          <%= render 'shared/table_column', field: :photo, model: :units do %>
            <% if item.photo.attached? %>
              <%= render 'shared/image',
                  image: item.photo,
                  size: :thumbnail,
                  alt: "#{item.name} photo" %>
            <% else %>
              <span style="color: #ccc;"><%= t('units.messages.no_photo') %></span>
            <% end %>
          <% end %>
          <%= render 'shared/table_column', field: :name, model: :units, item: item %>
          <%= render 'shared/table_column', field: :manufacturer, model: :units, item: item %>
          <%= render 'shared/table_column', field: :serial, model: :units, item: item %>
          <%= render 'shared/table_column', field: :action, i18n_key: 'units.actions.select' do %>
            <%= button_to t('units.actions.select'),
                update_unit_inspection_path(inspection, unit_id: item.id),
                method: :patch,
                data: {
                  turbo_confirm: t('inspections.messages.unit_selection_confirm', unit_name: item.name)
                } %>
          <% end %>
        </div>
      </li>
    <% end %>
  </ul>
</div>
