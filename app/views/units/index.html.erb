<%= render 'shared/page_header', title: @title || "Equipment" %>

<% if current_user.is_active? %>
  <%= button_to new_unit_path,
      method: :get do %>
    <strong><%= t('units.buttons.add_unit') %></strong>
  <% end %>
<% end %>

<% if current_user&.admin? && !request.path.include?("/all") %>
  <%= button_to all_units_path,
      method: :get do %>
    <strong><%= t('units.buttons.all_units') %></strong>
  <% end %>
<% end %>

<% show_filters = request.path.include?("/all") ? Unit.any? : current_user.units.any? %>
<% if show_filters %>
  <%= render "filter_form" %>
<% end %>

<% if @units.any? %>
  <%= render 'unit_table', unit: @units %>
  <div class="center">
    <p>
      <%= link_to units_path(format: :csv) do %>
        <strong>Export CSV</strong>
      <% end %>
    </p>
  </div>
<% else %>
  <p><%= t('units.messages.no_units_found') %></p>
<% end %>
